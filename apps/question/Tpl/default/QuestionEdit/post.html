
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title> | wordͼƬ�Զ��ϴ� | Applet��� - �������</title>
    <script type="text/javascript" src="__APP__/questionEdit/ckeditor/ckeditor.js"></script>
    <script src="__THEME__/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" language="javascript" src="__APP__/questionEdit/wordimage_uploader.js"></script>
</head>
<body>
<form method="post" action="{:U('question/QuestionEdit/test')}">
    <!--<textarea id="editor1" name='content'></textarea>
    <textarea id="editor2" name='content1'></textarea>-->
    <textarea id="questionContentEdit" name="question_content"><?php
				if (isset($questionClick['question_content'])) {
					echo htmlentities($questionClick['question_content'], ENT_QUOTES, 'UTF-8');
				}
			?>
    </textarea>
    <textarea id="answerTextEdit" name="answer_text">
        <?php
				if (isset($questionClick['answer_text'])) {
					echo htmlentities($questionClick['answer_text'], ENT_QUOTES, 'UTF-8');
				}
			?>
    </textarea>
    <input type='submit' value='提交'>
</form>
<script type="text/javascript" >
    /*//ckEditor���ص�editor1
    var editor = CKEDITOR.replace('editor1');
    var editor2 = CKEDITOR.replace('editor2');
    //构建图片上传地址
    var sUrl ='__ROOT__/phpUpload/upload_json.php';
    //构建应用名称，如本系统名称为‘wordimg’，如果为根应用，请写为空字符串''
    var appName = '__APP__';
    var imageURL = "__ROOT__/"
    //var sUrl ="http://192.168.1.117/yanjiuyuan/apps/teacher/_static/edit/php/upload_json.php";
    //����Ӧ����ƣ��籾ϵͳ���Ϊ��wordimg�������Ϊ��Ӧ�ã���дΪ���ַ�''
    //var appName = "http://192.168.1.117/yanjiuyuan/apps/teacher/_static";
    //����WordImageUploader����
    var uploader = new WordImageUploader(sUrl, appName,imageName);
    //��ckeditor���ݸı�ʱ���Զ���Ⲣ�ϴ������еı���ͼƬ
    CKEDITOR.instances["editor1"].on("change", function() {
        uploader.uploadWordImagesFromCKEditor(CKEDITOR.instances["editor1"], '');
    });
    CKEDITOR.instances["editor2"].on("change", function() {
        uploader.uploadWordImagesFromCKEditor(CKEDITOR.instances["editor2"], '');
    });*/

    var questionContentEdit =  CKEDITOR.replace('questionContentEdit');
    var questionContentEditInstances =  CKEDITOR.instances[questionContentEdit];


    var answerTextEdit = CKEDITOR.replace('answerTextEdit');
    var answerTextEditInstances = CKEDITOR.instances[answerTextEdit];
    //构建图片上传地址
    var sUrl ='__ROOT__/phpUpload/upload_json.php';
    //构建应用名称，如本系统名称为‘wordimg’，如果为根应用，请写为空字符串''
    var appName = '__APP__';
    var imageURL = "__ROOT__/"
    //创建WordImageUploader对象\
    var uploader = new WordImageUploader(sUrl, appName,imageURL);
    //var uploader2 = new WordImageUploader(sUrl, appName,imageURL);


    //当ckeditor内容改变时，自动检测并上传内容中的本地图片
    questionContentEditInstances.on("change", function() {
        uploader.uploadWordImagesFromCKEditor(questionContentEditInstances, '');
    });

    answerTextEditInstances.on("change", function() {
        uploader.uploadWordImagesFromCKEditor(answerTextEditInstances, '');
    });
</script>

</body>
</html>