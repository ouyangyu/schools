<!DOCTYPE html>
<html>
<head>
    <title>uTeach后台</title>
    <link  rel="stylesheet" href="__THEME__/bootstrap/css/bootstrap.css"/>
    <link  rel="stylesheet" href="__THEME__/bootstrap/css/bootstrap-theme.min.css"/>
    <script src="__THEME__/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="__THEME__/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
</head>

<style>
    .addLeft{
        border-bottom: 1px solid #70BF41;;
    }
    .addLeftContent{
        font-size: 23px;
        font-weight: bolder;
    }
    .addRightContent{
        font-size: 23px;
        width: 50%;

    }

</style>
<body>

<div class="row" style="border-bottom: 5px solid #70BF41;margin-bottom: 50px">
    <h1 style="text-align:center;font-weight: bolder">添加学校信息</h1>
</div>

<div class="container">
    <form method="post" action="{:U('houtai/Schools/addSchoolInfo')}" id="schoolForm">

    <div class="row addLeft">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">学年</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >

            <select class="addRightContent" name='syear' >
                <option value="2014-2015" selected="selected">2014-2015</option>
                <option value="2015-2016">2015-2016</option>
                <option value="2016-2017">2016-2017</option>
                <option value="2017-2018">2017-2018</option>
                <option value="2018-2019">2018-2019</option>
                <option value="2019-2020">2019-2020</option>
                <option value="2020-2011">2020-2011</option>
            </select>
            </div>
        </div>
    </div>
        <div class="row addLeft">
            <div class=" col-md-3 col-md-offset-2">
                <div class="row container-fluid" style="text-align: right">
                    <span class="addLeftContent ">学期</span>

                </div>
            </div>
            <div class="addRight col-md-6 col-md-offset-0" style="margin-top: 5px">
                <div class="row container-fluid" >
                    <select class="addRightContent" name='syear_id' >
                        <option value="1" selected="selected">上学期</option>
                        <option value="2">下学期</option>
                    </select>
                </div>
            </div>
        </div>
    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">学校名称</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >
                    <input class="addRightContent" type="text" name='title' size='20' style="width: 50%"><span style="color: red;font-size: 23px">*</span>
            </div>
        </div>
    </div>

    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">学校网址</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >
                <input class="addRightContent" type="text" name='www_address' size='20' style="width: 50%">
            </div>
        </div>
    </div>
    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">邮政编码</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >
                <input class="addRightContent" type="text" name='zipcode' size='20' style="width: 50%">
            </div>
        </div>
    </div>
    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">邮箱</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >
                <input class="addRightContent" type="text" name='e_mail' size='20' style="width: 50%"><span style="color: red;font-size: 23px">*</span>
            </div>
        </div>
    </div>
    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">校长</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >
                <input class="addRightContent" type="text" name='principal' size='20' style="width: 50%"><span style="color: red;font-size: 23px">*</span>
            </div>
        </div>
    </div>
    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">电话</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >
                <input class="addRightContent" type="text" name='phone' size='20' style="width: 50%"><span style="color: red;font-size: 23px">*</span>
            </div>
        </div>
    </div>
    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">区号</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" >
                <input class="addRightContent" type="text" name='postcode' size='20' style="width: 50%">
            </div>
        </div>
    </div>
    <div class="row addLeft" style="margin-top: 10px">
        <div class=" col-md-3 col-md-offset-2">
            <div class="row container-fluid" style="text-align: right">
                <span class="addLeftContent ">地址</span>

            </div>
        </div>
        <div class="addRight col-md-6 col-md-offset-0">
            <div class="row container-fluid" style="font-size: 23px">
                {:W('Area',array('curPro'=>1,'curCity'=>2,'area'=>3,'tpl'=>'selectArea'))}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 col-md-offset-3">
            <a class="btn btn-lg pull-right" type="button" onclick="isok()">确定</a>
        </div>
        <div class="col-md-3">
            <a class="btn btn-lg" type="button" href = "{:U('houtai/schools/getSchoolInfoList')}">返回</a>
        </div>
    </div>

</form>

</div>


<script>
    var asd = false;
    $(document).ready(function(){

        $('input[name="title"]').focus(function(){
            $(this).next().html("<span style='color: #008000';>请输入学校名称</span>")
        }).blur(function(){
            if($(this).val()==""){
                $(this).next().text('学校名称不能为空');
            }
        });
        $('input[name="principal"]').focus(function(){
            $(this).next().html("<span style='color: #008000';>请输入校长姓名</span>")
        }).blur(function(){
            if($(this).val()==""){
                $(this).next().text('姓名不能为空');
            }
        });
        $('input[name="e_mail"]').focus(function(){
            $(this).next().html("<span style='color: #008000';>请输入EMAIL</span>");
        }).blur(function(){
            if($(this).val().search(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/)==-1){
                $(this).next().text('请输入正确的EMAIL格式');
                asd =false;
            }else{
                $(this).next().html("<span style='color:green';>√</span>");
                asd = true;
            }
        });
        $('input[name="phone"]').focus(function(){
           $(this).next().html("<span style='color: #008000';>请输入手机号码</span>");
        }).blur(function(){
            if($(this).val()==""){
                $(this).next().text('手机号码不能为空');
            }else{
                if($(this).val().search(/^1[3|4|5|8][0-9]\d{4,8}$/)==-1){
                    $(this).next().text('请输入正确的手机号码');
                    asd = false;
                }else{
                    $(this).next().html("<span style='color:green';>√</span>");
                    asd = true;
                }
            }
        });
        $("input[name='www_address']").blur(function(){
            $url = $("input[name='www_address']").val();
           $return =  IsURL($url);
            if($return){
                $(this).next().html("<span style='color:green';>√</span>");
                asd = true;
            }
            else
            {
                if($("input[name='www_address']").val()!=""){
                    $(this).next().html("网址格式错误！");
                    asd = false;
                }
            }
        });
        function IsURL(str_url){
            var strRegex = /^((https|http|ftp|rtsp|mms)?:\/\/)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6})(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/;
            var re=new RegExp(strRegex);
            //re.test()
            if (re.test(str_url)){
                return (true);
            }else{
                return (false);
            }
        }
   });

    function isok(){
        if($('input[name="e_mail"]').val()=="" | $('input[name="phone"]').val()=="" | $("input[name='title']").val()==""){
            alert("请填写完整信息！！！");
            /*var clas = $("#wrap").hasClass("start");
            if(!clas){
                $("#wrap").next().append("<p>带<span style='color:red;'> * </span>是必填项！</p>");
                $("#wrap").addClass("start");
            }
            asd = false;*/
            return false
        }else {
            $("#schoolForm").submit();
        }

        return true;
    }
</script>
</body>
</html>